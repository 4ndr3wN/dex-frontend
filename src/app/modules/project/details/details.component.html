<!--

  Digital Excellence Copyright (C) 2020 Brend Smits & Menks

   This program is free software: you can redistribute it and/or modify
   it under the terms of the GNU Lesser General Public License as published
   by the Free Software Foundation version 3 of the License.

   This program is distributed in the hope that it will be useful,
   but WITHOUT ANY WARRANTY; without even the implied warranty
   of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
   See the GNU Lesser General Public License for more details.

   You can find a copy of the GNU Lesser General Public License
   along with this program, in the LICENSE.md file in the root project directory.
   If not, see https://www.gnu.org/licenses/lgpl-3.0.txt

 -->

<ng-container *ngIf="projectLoading; else projectLoaded">
  <div class="row">
    <div class="offset-2 col-8">
      <p>Project is being loaded</p>
    </div>
  </div>
</ng-container>
<ng-template #projectLoaded>
  <div *ngIf="project; else noProject">
    <div class="row">
        <img src="https://www.rover.com/blog/wp-content/uploads/2019/06/bernese-mountain-dog-1177074_1920-960x540.jpg" alt="project-detail-image">
        <div class='project-modal-content '>
        <div id="title-wrapper">
          <h2 class="project-title">{{ project.name }}</h2>
          <div class="circle" style="background-color: unset">
            <img alt="Code project" [src]="getIconUrl()" onerror="this.src='/assets/images/placeholder.svg';" loading="lazy">
          </div>
          <!-- <div id="project-edit-buttons">
            <ng-container *ngIf="displayEditButton">
              <button class="primary" routerLink="/project/edit/{{ project?.id }}"><img alt=""
                  src="assets/images/edit.svg" loading="lazy"></button>
            </ng-container>
            <ng-container *ngIf="displayDeleteProjectButton">
              <button class="primary" (click)="onClickRemoveProject()"><img alt=""
                  src="assets/images/trash.svg" loading="lazy"></button>
            </ng-container>
          </div> -->
        </div>
        <div class=" project-metadata">
          <div *ngIf="project.uri" class="project-metadata__item">
            <p class='title'>Uploader</p>
            <p>
              {{ project.user.name }}
          </div>
          <div class="project-metadata__item">
            <p class='title'>External Link</p>

            <a href="{{ project.uri }}" rel="noreferrer noopener" target="_blank">{{ project.uri }}</a>

          </div>
          <div class="project-metadata__item">
            <p class='title'>Likes</p>
            <ul class="project-metadata__item__collaborators">
              <li>
                <!-- *ngFor="let collaborator of project.collaborators">{{ collaborator.fullName }} -
                {{ collaborator.role}} -->
                120
              </li>
            </ul>
          </div>
          <div class="project-metadata__item">
            <p class='title'>Upload Date</p>
            <p>
              {{ project.created | date:'longDate' }}
          </div>
        </div>

        <div class="project-tags" [hidden]="!displayTags()">
          <a class="project-tags__tag" href="javascript:void(0)">
            Game
          </a>
          <a class="project-tags__tag" href="javascript:void(0)">
            JavaScript
          </a>
          <a class="project-tags__tag" href="javascript:void(0)">
            HTML
          </a>
          <a class="project-tags__tag" href="javascript:void(0)">
            CSS
          </a>
          <a class="project-tags__tag" href="javascript:void(0)">
            UX
          </a>
          <a class="project-tags__tag" href="javascript:void(0)">
            Interaction
          </a>
          <a class="project-tags__see-more-link" href="javascript:void(0)">
            see more tags&hellip;
          </a>
        </div>

        <hr>

        <div class='bottom'>
          <div class='menu-wrapper'>
            <div class='menu'>
              <div (click)="setActiveTab('description')" [ngClass]="{'active': this.activeTab == 'description' }" class='item'>
                Description
              </div>
              <div (click)="setActiveTab('contact')" [ngClass]="{'active': this.activeTab == 'contact' }" class='item'>
                Contact
              </div>
              <div (click)="setActiveTab('collaborators')" [ngClass]="{'active': this.activeTab == 'collaborators' }" class='item'>
                Collaborators
              </div>
            </div>
            <div class="cog" [popover]="cogTooltip" placement="bottom" triggers="click">
              COG
            </div>
            <ng-template #cogTooltip class="cog-tooltip">
              <ng-container *ngIf="displayHighlightButton">
                <a class="cog-tooltip-item" (click)="onClickHighlightButton()"><em class="fas fa-edit"></em>Hightlight settings</a>
              </ng-container>
              <ng-container *ngIf="displayEditButton">
                <a class="cog-tooltip-item" routerLink="/project/edit/{{project?.id}}"><em class="fas fa-highlighter"></em>Edit project</a>
              </ng-container>
              <ng-container *ngIf="displayDeleteProjectButton">
                <a class="cog-tooltip-item" routerLink="/project/delete/{{project?.id}}"><em class="fas fa-trash"></em>Delete project</a>
              </ng-container>
            </ng-template>
          </div>

          <div class='tab-content'>
            <ng-container *ngIf=" this.activeTab == 'description' " class="project-description large">
              <p class="dex-quill-viewer" [innerHTML]="project.description | safeHtml"></p>
            </ng-container>
            <ng-container *ngIf=" this.activeTab == 'contact' ">
              <p>contact</p>
            </ng-container>
            <ng-container *ngIf=" this.activeTab == 'collaborators' ">
              <app-collaborator *ngFor="let collaborator of project.collaborators" [collaborator]="collaborator"></app-collaborator>
            </ng-container>
          </div>
        </div>
        <ng-container *ngIf="displayEmbedButton">
          <app-embed-button [projectId]=project.id></app-embed-button>
        </ng-container>
      </div>
    </div>
  </div>

  <ng-template #noProject>
    <div class="row">
      <div class="offset-2 col-8">
        <h1>Project details</h1>
        <p>The project with the identifier "{{invalidId}}" could not be found.</p>

      </div>
    </div>
  </ng-template>
</ng-template>
